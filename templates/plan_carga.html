<!DOCTYPE html>
<html lang="en">

<head>
<meta charset="utf-8" />
<title>plan</title>
<meta name="frm_plan" content="form planea" />
<meta name="PM1" content="width=device-width, initial-scale=1.0" />
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
</head>


<!--
<script>
      document.addEventListener('DOMContentLoaded', function() {
        const inputs = document.querySelectorAll('input[type="text"], input[type="number"], textarea');

        inputs.forEach(function(input) {

        input.addEventListener('input', function() {
            input.value = input.value.toUpperCase();
            });

        });
      });
    </script>
  -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Campos que NO queremos forzar a uppercase
      const excludeFields = ['fuentes', 'prop', 'temas', 'apAct', 'deAct', 'ciAct'];

      const inputs = document.querySelectorAll('input[type="text"], input[type="number"], textarea');

      inputs.forEach(function(input) {
        // Solo agregar el evento si el campo NO está en excludeFields
        if (!excludeFields.includes(input.name)) {
          input.addEventListener('input', function() {
            this.value = this.value.toUpperCase();
          });
        }
      });
    });
  </script>

  <script>
      // Function to concatenate fields before submitting the form
      function concatenateFields() {
          // Get values of first_name and last_name
          var docenteID = document.getElementById("docenteID").value;
          var asig = document.getElementById("asig").value;
          var semestre = document.getElementById("semestre").value;
          var grupos = document.getElementById("grupos").value;

          // Concatenate them and assign to the hidden full_name input
          document.getElementById("cve").value = docenteID + asig + semestre + grupos;
      }
  </script>


{% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
          <div class="container mt-3">
            {% for category, message in messages %}
              <div class="alert alert-{{ 'danger' if category == 'danger' else 'success' }}" role="alert">
                {{ message }}
              </div>
            {% endfor %}
          </div>
        {% endif %}
      {% endwith %}



<body>
  
  <div class="container">
    


    <form method="POST" enctype="multipart/form-data" action="/plan_carga">
    <div style="background-color:rgb(120,120,0,0.5)"> 
      <h3>Datos Generales</h3>
      </div>
      <div class="mb-3 row g-3">
        <div class="col-sm-4">
        <label for="plantel" class="form-label" style="font-weight:bold;">Plantel</label>
          <select type="text" class="form-select" name="plantel">
            <option selected>Seleccione...</option>
            <option value="CETAC 05">CETAC 05</option>
            <option value="CBTA 30">CBTA 30</option>
            <option value="CBTA 40">CBTA 40</option>
            <option value="CBTA 61">CBTA 61</option>
            <option value="CBTA 103">CBTA 103</option>
            <option value="CBTA 204">CBTA 204</option>
            <option value="CBTA 205">CBTA 205</option>
          </select>
        </div>
        <div class="col-sm-4">
        <label for="ciclo" class="form-label" style="font-weight:bold;">Ciclo</label>
          <select type="text" class="form-select" name="ciclo">
            <option selected>Seleccione...</option>
            <option value="2025-2026">2025-2026</option>
            <option value="2026-2027">2026-2027</option>
            <option value="2027-2028">2027-2028</option>
            <option value="2028-2029">2028-2029</option>
            <option value="2029-2030">2029-2030</option>
          </select>
        </div>
        <div class="col-sm-4">
        <label class="form-label" for="periodo" style="font-weight:bold;">Periodo</label>
        <select type="text" class="form-select" name="periodo">
          <option selected>Seleccione...</option>
          <option value="AGOSTO-ENERO">AGOSTO-ENERO</option>
          <option value="FEBRERO-JULIO">FEBRERO-JULIO</option>
        </select>
        </div>
      </div>
      <div class="mb-3 row g-3">
        <div class="col-sm-4">
        <label class="form-label" for="carrera" style="font-weight:bold;">Carrera</label>
        <select type="text" class="form-select" name="carrera">
          <option selected>Seleccione...</option>
          <option value="TA">TA</option>
          <option value="SMEC">SMEC</option>
          <option value="ADMN">ADMN</option>
          <option value="AEA">AEA</option>
          <option value="BASICO">BASICO</option>
          <option value="PROPE">PROPE</option>
        </select>
        </div>
        <div class="col-sm-4">
        <label class="form-label" for="semestre" style="font-weight:bold;">Semestre</label>
        <select type="text" class="form-select" name="semestre">
          <option selected>Seleccione...</option>
          <option value="1">1</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5</option>
          <option value="6">6</option>
        </select>
        </div>
        <div class="col-sm-4">
        <label class="form-label" for="grupos" style="font-weight:bold;">Grupo(s)</label>
        <input type="text" class="form-control" name="grupos" placeholder="A,B,C,D,E,F,G">
        </div>
      </div>
      <div class="col-sm-12">
        <label class="form-label" for="asig" style="font-weight:bold;">Asignatura</label>
        <input type="text" class="form-control" name="asig" placeholder="PM1">
        </div>
      <div class="mb-3 row g-2">
        <div class="col-sm-6">
        <label for="prop" class="form-label" style="font-weight:bold;">Propósito formativo</label>
        <textarea type="text" class="form-control" name="prop"></textarea>
        </div>
        <div class="col-sm-6">
        <label for="temas" class="form-label" style="font-weight:bold;">Temas</label>
        <textarea type="text" class="form-control" name="temas"></textarea>
        </div>
      </div>
      
      <div class="mb-3 row g-3">
        <div class="col-sm-5">
        <label for="horas_sem" class="form-label" style="font-weight:bold;">horas/semana</label>
        <input type="number" class="form-control" name="horas_sem" placeholder="8">
        </div>
        <div class="col-sm-7">
        <label for="docenteID" class="form-label" style="font-weight:bold;">Docente ID</label>
        <input type="text" class="form-control" name="docenteID" placeholder="205RODSH750621">
        </div>
      </div>
      <div class="mb-3 row g-1">
        <div class="col-sm-8">
        <label for="imparte" class="form-label" style="font-weight:bold;">Período de aplicación</label>
        <input type="text" class="form-control" name="imparte" placeholder="DEL 17 DE DICIEMBRE AL 21 DE DICIEMBRE">
        </div>
      </div>


    <div style="background-color:rgb(120,120,0,0.5)">
        <h3>Asignaturas transversales con PEC (transdisciplinares):</h3> 
    </div>

    <div class="mb-3 row g-2">
        <div class="col-sm-6">
        <label for="trAsigP1" class="form-label" style="font-weight:bold;">Asignatura 1</label>
        <input type="text" class="form-control" name="trAsigP1">
        </div>
        <div class="col-sm-6">
        <label for="trtemaP1" class="form-label" style="font-weight:bold;">Tema</label>
        <input type="text" class="form-control" name="trtemaP1">
        </div>
    </div>
    <div class="mb-3 row g-2">
        <div class="col-sm-6">
        <label for="trAsigP2" class="form-label" style="font-weight:bold;">Asignatura 2</label>
        <input type="text" class="form-control" name="trAsigP2">
        </div>
        <div class="col-sm-6">
        <label for="trtemaP2" class="form-label" style="font-weight:bold;">Tema</label>
        <input type="text" class="form-control" name="trtemaP2">
        </div>
    </div>
    <div class="mb-3 row g-2">
        <div class="col-sm-6">
        <label for="trAsigP3" class="form-label" style="font-weight:bold;">Asignatura 3</label>
        <input type="text" class="form-control" name="trAsigP3">
        </div>
        <div class="col-sm-6">
        <label for="trtemaP3" class="form-label" style="font-weight:bold;">Tema</label>
        <input type="text" class="form-control" name="trtemaP3">
        </div>
    </div>
      <div class="mb-3 row g-2">
          <div class="col-sm-6">
          <label for="trAsigP4" class="form-label" style="font-weight:bold;">Asignatura 4</label>
          <input type="text" class="form-control" name="trAsigP4">
          </div>
          <div class="col-sm-6">
          <label for="trtemaP4" class="form-label" style="font-weight:bold;">Tema</label>
          <input type="text" class="form-control" name="trtemaP4">
          </div>
      </div>



      <div style="background-color:rgb(120,120,0,0.5)">
        <h3>Asignaturas transversales (Multi o Interdisciplinar):</h3> 
      </div>

      <div class="mb-3 row g-2">
        <div class="col-sm-6">
        <label for="trAsigM1" class="form-label" style="font-weight:bold;">Asignatura 1</label>
        <input type="text" class="form-control" name="trAsigM1">
        </div>
        <div class="col-sm-6">
        <label for="trtemaM1" class="form-label" style="font-weight:bold;">Tema</label>
        <input type="text" class="form-control" name="trtemaM1">
        </div>
      </div>
      <div class="mb-3 row g-2">
        <div class="col-sm-6">
        <label for="trAsigM2" class="form-label" style="font-weight:bold;">Asignatura 2</label>
        <input type="text" class="form-control" name="trAsigM2">
        </div>
        <div class="col-sm-6">
        <label for="trtemaM2" class="form-label" style="font-weight:bold;">Tema</label>
        <input type="text" class="form-control" name="trtemaM2">
        </div>
      </div>
      <div class="mb-3 row g-2">
        <div class="col-sm-6">
        <label for="trAsigM3" class="form-label" style="font-weight:bold;">Asignatura 3</label>
        <input type="text" class="form-control" name="trAsigM3">
        </div>
        <div class="col-sm-6">
        <label for="trtemaM3" class="form-label" style="font-weight:bold;">Tema</label>
        <input type="text" class="form-control" name="trtemaM3">
        </div>
      </div>
      <div class="mb-3 row g-2">
          <div class="col-sm-6">
          <label for="trAsigM4" class="form-label" style="font-weight:bold;">Asignatura 4</label>
          <input type="text" class="form-control" name="trAsigM4">
          </div>
          <div class="col-sm-6">
          <label for="trtemaM4" class="form-label" style="font-weight:bold;">Tema</label>
          <input type="text" class="form-control" name="trtemaM4">
          </div>
      </div>



    <div style="background-color:rgb(120,120,0,0.5)">
        <h3>Apertura:</h3> 
    </div>
      <div class="mb-3 row g-2">

        <div class="col-sm-5">
          <label for="apDur" class="form-label" style="font-weight:bold;">Duración<br>(minutos)</label>
          <input type="number" class="form-control" name="apDur" placeholder="120">
        </div>
        <div class="col-sm-7">
          <label for="apEv" class="form-label" style="font-weight:bold;"><br>Evidencia</label>
          <input type="text" class="form-control" name="apEv">
        </div>
      </div>
      <div class="mb-3 row g-2">
        <div class="col-sm-7">
          <label for="apIns" class="form-label" style="font-weight:bold;"><br>Instrumento</label>
          <select type="text" class="form-select" name="apIns">
            <option selected>Seleccione...</option>
            <option value="NA">NA</option>
            <option value="LISTA DE COTEJO">LISTA DE COTEJO</option>
            <option value="RÚBRICA">RÚBRICA</option>
            <option value="GUÍA DE OBSERVACIÓN">GUÍA DE OBSERVACIÓN</option>
            <option value="CUESTIONARIO">CUESTIONARIO</option> 
        </select>
        </div>
        <div class="col-sm-5">
          <label for="apPond" class="form-label" style="font-weight:bold;"><br>Ponderación (%)</label>
          <input type="number" class="form-control" name="apPond" placeholder="80">
        </div>
      </div>
      <div class="mb-3 row g-1">
        <div class="col-sm">
          <label for="apAct" class="form-label" style="font-weight:bold;">Actividades de apertura:</label>
          <textarea type="text" class="form-control" name="apAct" rows="5"></textarea>
        </div>
      </div>

    <div style="background-color:rgb(120,120,0,0.5)">
        <h3>Desarrollo:</h3> 
    </div>
      <div class="mb-3 row g-2">

        <div class="col-sm-5">
            <label for="deDur" class="form-label" style="font-weight:bold;">Duración<br>(minutos)</label>
            <input type="number" class="form-control" name="deDur" placeholder="90">
        </div>
        <div class="col-sm-7">
            <label for="deEv" class="form-label" style="font-weight:bold;"><br>Evidencia</label>
            <input type="text" class="form-control" name="deEv">
        </div>
      </div>
      <div class="mb-3 row g-2">
        <div class="col-sm-7">
            <label for="deIns" class="form-label" style="font-weight:bold;"><br>Instrumento</label>
            <select type="text" class="form-select" name="deIns">
              <option selected>Seleccione...</option>
              <option value="NA">NA</option>
              <option value="LISTA DE COTEJO">LISTA DE COTEJO</option>
              <option value="RÚBRICA">RÚBRICA</option>
              <option value="GUÍA DE OBSERVACIÓN">GUÍA DE OBSERVACIÓN</option>
              <option value="CUESTIONARIO">CUESTIONARIO</option>
            </select>
        </div>
          <div class="col-sm-5">
            <label for="dePond" class="form-label" style="font-weight:bold;"><br>Ponderación (%)</label>
            <input type="number" class="form-control" name="dePond" placeholder="80">
          </div>
        </div>
        <div class="mb-3 row g-1">
            <div class="col-sm">
            <label for="deAct" class="form-label" style="font-weight:bold;">Actividades de desarrollo:</label>
            <textarea type="text" class="form-control" name="deAct" rows="7"></textarea>
            </div>
        </div>

    <div style="background-color:rgb(120,120,0,0.5)">
        <h3>Cierre:</h3> 
    </div>

        <div class="mb-3 row g-2">

      <div class="col-sm-5">
        <label for="ciDur" class="form-label" style="font-weight:bold;">Duración<br>(minutos)</label>
        <input type="number" class="form-control" name="ciDur" placeholder="90">
      </div>
      <div class="col-sm-7">
        <label for="ciEv" class="form-label" style="font-weight:bold;"><br>Evidencia</label>
        <input type="text" class="form-control" name="ciEv">
      </div>
        </div>
      <div class="mb-3 row g-2">
      <div class="col-sm-7">
        <label for="ciIns" class="form-label" style="font-weight:bold;"><br>Instrumento</label>
        <select type="text" class="form-select" name="ciIns">
          <option selected>Seleccione...</option>
          <option value="NA">NA</option>
          <option value="LISTA DE COTEJO">LISTA DE COTEJO</option>
          <option value="RÚBRICA">RÚBRICA</option>
          <option value="GUÍA DE OBSERVACIÓN">GUÍA DE OBSERVACIÓN</option>
          <option value="CUESTIONARIO">CUESTIONARIO</option>
        </select>
      </div>
      <div class="col-sm-5">
        <label for="ciPond" class="form-label" style="font-weight:bold;"><br>Ponderación (%)</label>
        <input type="number" class="form-control" name="ciPond" placeholder="80">
      </div>
      </div>
      <div class="mb-3 row g-1">
        <div class="col-sm">
        <label for="ciAct" class="form-label" style="font-weight:bold;">Actividades de cierre:</label>
        <textarea type="text" class="form-control" name="ciAct" rows="5"></textarea>
        </div>
      </div>
      {% set ns = namespace(total=0) %}

            {% for i in plan %}

                    {% set apertura = i['apPond'] | int %}
                    {% set desarrollo = i['dePond'] | int %}
                    {% set cierre = i['ciPond'] | int %}
                    {% set parcial_sum = apertura + desarrollo + cierre %}
                    {% set ns.total = ns.total + parcial_sum %}

            {% endfor %}

            <text class='partial-footer-total'>Total ponderado: {{ ns.total }}%</text>             

<br>




      {% set ns = namespace(total=0) %}

            {% for i in plan %}

                    {% set tapertura = i['apDur'] | int %}
                    {% set tdesarrollo = i['deDur'] | int %}
                    {% set tcierre = i['ciDur'] | int %}
                    {% set parcial_sum = tapertura + tdesarrollo + tcierre %}
                    {% set ns.total = ns.total + parcial_sum %}

            {% endfor %}
      

            <text class='partial-footer-total'>Total tiempo: {{ ns.total/60 }}                         hrs</text>
      <br><br><br>


    <div style="background-color:rgb(120,120,0,0.5)">
        <h3>Complementos:</h3> 
    </div>
    <div class="mb-3 row g-3">
        <div class="col-sm-4">
        <label for="materiales" class="form-label" style="font-weight:bold;">Materiales:</label>
        <textarea type="text" class="form-control" name="materiales" rows="4"></textarea>
        </div>
        <div class="col-sm-4">
        <label for="equipo" class="form-label" style="font-weight:bold;">Equipo:</label>
        <textarea type="text" class="form-control" name="equipo" rows="4"></textarea>
        </div>
        <div class="col-sm-4">
        <label for="fuentes" class="form-label" style="font-weight:bold;">Fuentes:</label>
        <textarea type="text" class="form-control" name="fuentes" rows="4"></textarea>
        </div>
    </div>

    <div style="background-color:rgb(120,120,0,0.5)">
        <h3>Validación:</h3> 
    </div>
    <div class="mb-3 row g-3">
        <div class="col-sm-4">
        <label for="elabora" class="form-label" style="font-weight:bold;">Elabora:</label>
        <input type="text" class="form-control" name="elabora"></input>
        </div>
        <div class="col-sm-4">
        <label for="revisa" class="form-label" style="font-weight:bold;">Revisa:</label>
        <input type="text" class="form-control" name="revisa"></input>
        </div>
        <div class="col-sm-4">
        <label for="avala" class="form-label" style="font-weight:bold;">Avala:</label>
        <input type="text" class="form-control" name="avala"></input>

          
        <input type="hidden" class="form-control" name="cve"></input>
        <br><br>

          
          
        </div>
      <label>Instrumentos<br>Archivo PDF:</label> 
        <input type="file" name="pdf_file" accept="application/pdf" required><br><br>
      <button type="submit" class="btn btn-success">Enviar</button>
        <a href="{{ request.referrer }}">
            <button type="button">Cancelar</button>
        </a> 
    </div>

<!--
      <button type="submit">Subir</button>  
      <a href="{{ request.referrer }}">
          <button type="button">Cancelar</button>
-->
  </div>



    </form>
    <footer>
        <p class="mt-3 mb-5 text-center">&copy; 2025 HRBC</p>
        </footer>
    <br><br><br><br><br>


  </div>
</form>
</div>

</body>

</html>