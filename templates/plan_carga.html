<!DOCTYPE html>
<html lang="en">

<head>
<meta charset="utf-8" />
<title>plan</title>
<meta name="frm_plan" content="form planea" />
<meta name="PM1" content="width=device-width, initial-scale=1.0" />
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
</head>



<script>
      document.addEventListener('DOMContentLoaded', function() {
        const inputs = document.querySelectorAll('input[type="text"], input[type="number"], textarea');

        inputs.forEach(function(input) {

        input.addEventListener('input', function() {
            input.value = input.value.toUpperCase();
            });

        });
      });
    </script>

  <script>
      // Function to concatenate fields before submitting the form
      function concatenateFields() {
          // Get values of first_name and last_name
          var docenteID = document.getElementById("docenteID").value;
          var asig = document.getElementById("asig").value;
          var semestre = document.getElementById("semestre").value;
          var grupos = document.getElementById("grupos").value;

          // Concatenate them and assign to the hidden full_name input
          document.getElementById("cve").value = docenteID + asig + semestre + grupos;
      }
  </script>


{% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
          <div class="container mt-3">
            {% for category, message in messages %}
              <div class="alert alert-{{ 'danger' if category == 'danger' else 'success' }}" role="alert">
                {{ message }}
              </div>
            {% endfor %}
          </div>
        {% endif %}
      {% endwith %}



<body>
  
  <div class="container">
    


    <form method="POST" enctype="multipart/form-data" action="{{ url_for('plan_carga') }}">
    <div style="background-color:rgb(120,120,0,0.5)"> 
      <h3>Datos Generales</h3>
      </div>
      <div class="mb-3 row g-3">
        <div class="col-sm-3">
        <label for="plantel" class="form-label" style="font-weight:bold;">Plantel</label>
        <input type="text" class="form-control" name="plantel" placeholder="CBTA 321">
        </div>
        <div class="col-sm-3">
        <label for="ciclo" class="form-label" style="font-weight:bold;">Ciclo</label>
        <input type="text" class="form-control" name="ciclo" placeholder="2020-2021">
        </div>
        <div class="col-sm-3">
        <label class="form-label" for="periodo" style="font-weight:bold;">Periodo</label>
        <select class="form-select" name="periodo">
          <option selected>Seleccione...</option>
          <option value="1">AGOSTO-ENERO</option>
          <option value="2">FEBRERO-JULIO</option>
        </select>
        </div>
      </div>
      <div class="mb-3 row g-3">
        <div class="col-sm-3">
        <label class="form-label" for="carrera" style="font-weight:bold;">Carrera</label>
        <select class="form-select" name="carrera">
          <option selected>Seleccione...</option>
          <option value="1">TA</option>
          <option value="2">SMEC</option>
          <option value="3">ADMN</option>
          <option value="4">BASICO</option>
        </select>
        </div>
        <div class="col-sm-3">
        <label class="form-label" for="semestre" style="font-weight:bold;">Semestre</label>
        <select class="form-select" name="semestre">
          <option selected>Seleccione...</option>
          <option value="1">1</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5</option>
          <option value="6">6</option>
        </select>
        </div>
        <div class="col-sm-3">
        <label class="form-label" for="grupos" style="font-weight:bold;">Grupo(s)</label>
        <input type="text" class="form-control" name="grupos" placeholder="D">
        </div>
      </div>
      <div class="mb-3 row g-3">
        <div class="col-sm-3">
        <label for="prop" class="form-label" style="font-weight:bold;">Propósito formativo</label>
        <textarea class="form-control" name="prop"></textarea>
        </div>
        <div class="col-sm-3">
        <label for="temas" class="form-label" style="font-weight:bold;">Temas</label>
        <textarea class="form-control" name="temas"></textarea>
        </div>
      </div>
      
      <div class="mb-3 row g-3">
        <div class="col-sm-3">
        <label for="horas_sem" class="form-label" style="font-weight:bold;">horas/semana</label>
        <input type="number" class="form-control" name="horas_sem" placeholder="4">
        </div>
        <div class="col-sm-3">
        <label for="docenteID" class="form-label" style="font-weight:bold;">Docente ID</label>
        <input type="text" class="form-control" name="docenteID" placeholder="MANUEL LOPEZ SUAREZ">
        </div>
      </div>
      <div class="mb-3 row g-3">
        <div class="col-sm-5">
        <label for="imparte" class="form-label" style="font-weight:bold;">Período de impartición</label>
        <input type="text" class="form-control" name="imparte" placeholder="del 1 de agosto al 5 de agosto">
        </div>
      </div>


    <div style="background-color:rgb(120,120,0,0.5)">
        <h3>Asignaturas transversales:</h3> 
    </div>

    <div class="mb-3 row g-3">
        <div class="col-sm-5">
        <label for="trAsig1" class="form-label" style="font-weight:bold;">Asignatura 1</label>
        <input type="text" class="form-control" name="trAsig1">
        </div>
        <div class="col-sm-5">
        <label for="trtema1" class="form-label" style="font-weight:bold;">Tema</label>
        <input type="text" class="form-control" name="trtema1">
        </div>
    </div>
    <div class="mb-3 row g-3">
        <div class="col-sm-5">
        <label for="trAsig2" class="form-label" style="font-weight:bold;">Asignatura 2</label>
        <input type="text" class="form-control" name="trAsig2">
        </div>
        <div class="col-sm-5">
        <label for="trtema2" class="form-label" style="font-weight:bold;">Tema</label>
        <input type="text" class="form-control" name="trtema2">
        </div>
    </div>
    <div class="mb-3 row g-3">
        <div class="col-sm-5">
        <label for="trAsig3" class="form-label" style="font-weight:bold;">Asignatura 3</label>
        <input type="text" class="form-control" name="trAsig3">
        </div>
        <div class="col-sm-5">
        <label for="trtema3" class="form-label" style="font-weight:bold;">Tema</label>
        <input type="text" class="form-control" name="trtema3">
        </div>
    </div>



    <div style="background-color:rgb(120,120,0,0.5)">
        <h3>Apertura:</h3> 
    </div>
      <div class="mb-3 row g-1">

        <div class="col-sm-2">
          <label for="apDur" class="form-label" style="font-weight:bold;">Duración<br>(minutos)</label>
          <input type="number" class="form-control" name="apDur" placeholder="120">
        </div>
        <div class="col-sm-2">
          <label for="apEv" class="form-label" style="font-weight:bold;"><br>Evidencia</label>
          <input type="text" class="form-control" name="apEv">
        </div>
        <div class="col-sm-2">
          <label for="apIns" class="form-label" style="font-weight:bold;"><br>Instrumento</label>
          <select class="form-select" name="apIns">
            <option selected>Seleccione...</option>
            <option value="1">Lista de cotejo</option>
            <option value="2">Rúbrica</option>
            <option value="3">Guía de observación</option>
            <option value="4">Cuestionario</option>
        </select>
        </div>
        <div class="col-sm-2">
          <label for="apPond" class="form-label" style="font-weight:bold;"><br>Ponderación (%)</label>
          <input type="number" class="form-control" name="apPond" placeholder="0">
        </div>
      </div>
      <div class="mb-3 row g-3">
        <div class="col-sm">
          <label for="apAct" class="form-label" style="font-weight:bold;">Actividades de apertura:</label>
          <textarea class="form-control" name="apAct" rows="5"></textarea>
        </div>
      </div>

    <div style="background-color:rgb(120,120,0,0.5)">
        <h3>Desarrollo:</h3> 
    </div>
      <div class="mb-3 row g-1">

        <div class="col-sm-2">
            <label for="deDur" class="form-label" style="font-weight:bold;">Duración<br>(minutos)</label>
            <input type="number" class="form-control" name="deDur" placeholder="120">
        </div>
        <div class="col-sm-2">
            <label for="deEv" class="form-label" style="font-weight:bold;"><br>Evidencia</label>
            <input type="text" class="form-control" name="deEv">
        </div>
        <div class="col-sm-2">
            <label for="deIns" class="form-label" style="font-weight:bold;"><br>Instrumento</label>
            <select class="form-select" name="deIns">
              <option selected>Seleccione...</option>
              <option value="1">Lista de cotejo</option>
              <option value="2">Rúbrica</option>
              <option value="3">Guía de observación</option>
              <option value="4">Cuestionario</option>
            </select>
        </div>
          <div class="col-sm-2">
            <label for="dePond" class="form-label" style="font-weight:bold;"><br>Ponderación (%)</label>
            <input type="number" class="form-control" name="dePond" placeholder="50">
          </div>
        </div>
        <div class="mb-3 row g-3">
            <div class="col-sm">
            <label for="deAct" class="form-label" style="font-weight:bold;">Actividades de desarrollo:</label>
            <textarea class="form-control" name="deAct" rows="7"></textarea>
            </div>
        </div>

    <div style="background-color:rgb(120,120,0,0.5)">
        <h3>Cierre:</h3> 
    </div>

        <div class="mb-3 row g-1">

      <div class="col-sm-2">
        <label for="ciDur" class="form-label" style="font-weight:bold;">Duración<br>(minutos)</label>
        <input type="number" class="form-control" name="ciDur" placeholder="120">
      </div>
      <div class="col-sm-2">
        <label for="ciEv" class="form-label" style="font-weight:bold;"><br>Evidencia</label>
        <input type="text" class="form-control" name="ciEv">
      </div>
      <div class="col-sm-2">
        <label for="ciIns" class="form-label" style="font-weight:bold;"><br>Instrumento</label>
        <select class="form-select" name="ciIns">
          <option selected>Seleccione...</option>
          <option value="1">Lista de cotejo</option>
          <option value="2">Rúbrica</option>
          <option value="3">Guía de observación</option>
          <option value="4">Cuestionario</option>
        </select>
      </div>
      <div class="col-sm-2">
        <label for="ciPond" class="form-label" style="font-weight:bold;"><br>Ponderación (%)</label>
        <input type="number" class="form-control" name="ciPond" placeholder="50">
      </div>
      </div>
      <div class="mb-3 row g-3">
        <div class="col-sm">
        <label for="ciAct" class="form-label" style="font-weight:bold;">Actividades de cierre:</label>
        <textarea class="form-control" name="ciAct" rows="5"></textarea>
        </div>
      </div>
      {% set ns = namespace(total=0) %}

            {% for i in plan %}

                    {% set apertura = i['apPond'] | int %}
                    {% set desarrollo = i['dePond'] | int %}
                    {% set cierre = i['ciPond'] | int %}
                    {% set parcial_sum = apertura + desarrollo + laboratorio + cierre %}
                    {% set ns.total = ns.total + parcial_sum %}

            {% endfor %}

            <text class='partial-footer-total'>Total ponderado: {{ ns.total }}%</text>             
            <br>





      {% set ns = namespace(total=0) %}

            {% for i in plan %}

                    {% set tapertura = i['apDur'] | int %}
                    {% set tdesarrollo = i['deDur'] | int %}
                    {% set tcierre = i['ciDur'] | int %}
                    {% set parcial_sum = tapertura + tdesarrollo + tlaboratorio + tcierre %}
                    {% set ns.total = ns.total + parcial_sum %}

            {% endfor %}

            <text class='partial-footer-total'>Total tiempo: {{ ns.total/60 }}                         hrs</text>


    <div style="background-color:rgb(120,120,0,0.5)">
        <h3>Complementos:</h3> 
    </div>
    <div class="mb-3 row g-3">
        <div class="col-sm-3">
        <label for="materiales" class="form-label" style="font-weight:bold;">Materiales:</label>
        <textarea type="text" class="form-control" name="materiales" rows="4"></textarea>
        </div>
        <div class="col-sm-3">
        <label for="equipo" class="form-label" style="font-weight:bold;">Equipo:</label>
        <textarea type="text" class="form-control" name="equipo" rows="4"></textarea>
        </div>
        <div class="col-sm-3">
        <label for="fuentes" class="form-label" style="font-weight:bold;">Fuentes:</label>
        <textarea type="text" class="form-control" name="fuentes" rows="4"></textarea>
        </div>
    </div>

    <div style="background-color:rgb(120,120,0,0.5)">
        <h3>Validación:</h3> 
    </div>
    <div class="mb-3 row g-3">
        <div class="col-sm-3">
        <label for="elabora" class="form-label" style="font-weight:bold;">Elabora:</label>
        <input type="text" class="form-control" name="elabora"></input>
        </div>
        <div class="col-sm-3">
        <label for="revisa" class="form-label" style="font-weight:bold;">Revisa:</label>
        <input type="text" class="form-control" name="revisa"></input>
        </div>
        <div class="col-sm-3">
        <label for="avala" class="form-label" style="font-weight:bold;">Avala:</label>
        <input type="text" class="form-control" name="avala"></input>

          
        <input type="hidden" class="form-control" name="cve"></input>
        <br><br>
        <button type="submit" class="btn btn-success">Enviar</button>
          <a href="{{ request.referrer }}">
              <button type="button">Cancelar</button>
          </a> 
        </div>
    </div>

<!--
      <button type="submit">Subir</button>  
      <a href="{{ request.referrer }}">
          <button type="button">Cancelar</button>
-->
  </div>



    </form>
    <footer>
        <p class="mt-3 mb-5 text-center">&copy; 2025 HRBC</p>
        </footer>
    <br><br><br><br><br>


  </div>
</form>

</body>

</html>